The \texttt{TEMPLATES} block defines a template for deriving multiple data model instances,
one for each row of the associated VOTable \texttt{TABLE}.  A subset of the associated
\texttt{TABLE} rows may be selected using the \texttt{WHERE} syntax element.

\begin{lstlisting}[caption={Example of a \texttt{TEMPLATES} block mapping the rows of the table \texttt{Results} (see line~\ref{TEMPLATES_snippet} in Appendix~\ref{appendix_A}).
Each row of the table named \texttt{Results} is be mapped as an instance of VO-DML type \texttt{cube:NDPoint}.
Instances mapping a row do not play any particular role.},language=XML]
<VODML xmlns="http://www.ivoa.net/xml/mivot">
    ...
    <GLOBALS>
    ...
    </GLOBALS>
    <!--
       Mapping of the rows of the table Results
     -->  
    <TEMPLATES tableref="Results">
        <INSTANCE dmid="IDtsIDdata" dmrole="" dmtype="cube:NDPoint">
            <COLLECTION dmrole="cube:NDPoint.observable">
                <INSTANCE dmtype="cube:Observable">
                    <ATTRIBUTE dmrole="cube:DataAxis.dependent" dmtype="ivoa:boolean" value="False"/>
                    ...
                </INSTANCE>
            </COLLECTION>
            ...
        </INSTANCE>
    </TEMPLATES>
  </TEMPLATES>
</VODML>
\end{lstlisting}

\begin{table}[!htbp]
  \small
  \centering
  \begin{tabulary}{\linewidth}{|c|J|}
    \hline 
         \textbf{Attribute} & 
         \textbf {Role}\\
    \hline
    \hline  
         \texttt{@tableref} & 
         ID or name of the mapped VOTable \texttt{TABLE}. ID match takes precedence over name matches when resolving the reference. \\
    \hline 
  \end{tabulary}
  \caption{\texttt{TEMPLATES} attributes.} 
  \label{tbl:templates-att}
\end{table}

\begin{table}[!htbp]
  \small
  \centering
  \begin{tabulary}{\linewidth}{|c|J|}
    \hline 
        \textbf{@tableref} &
        \textbf{Pattern}\\
    \hline
    \hline  
        OPT &           
        If \texttt{@tableref} is not present, \texttt{TEMPLATES} maps the first \texttt{TABLE} of the \texttt{RESOURCE}\\
    \hline 
  \end{tabulary}
  \caption{Valid attribute patterns for  \texttt{TEMPLATES}.} 
  \label{tbl:templates-pattern}
 \end{table}

\begin{table}[!htbp]
  \small
  \centering
  \begin{tabulary}{\linewidth}{|c |c |c|J|}
    \hline 
        \textbf{Element} &
        \textbf{Position} &
        \textbf{Occurs} &
        \\
    \hline
    \hline  
        \texttt{WHERE}  &        
        1 &           
        0-* &
        The mapping applies to rows matching the \texttt{WHERE} condition only\\
    \hline    
        \texttt{INSTANCE} &           
        2 &           
        0-* &
        Mapped instance templates\\
    \hline 
  \end{tabulary}
  \caption{Allowed children for \texttt{TEMPLATES}.} 
  \label{tbl:templates-children}
\end{table}
